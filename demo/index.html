<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>AT BookMarklet</title>
    <link id='ico' rel='shortcut icon' href='AT.ico' />
    <style>
        .imgBookmarklet {
            width: 224px;
            height: 183px;
        }
        .imgDrag {
            position: absolute;
            margin-left: 10px;
            width: 200px;
            margin-top: -30px;
        }
    </style>
</head>
<body>

<p align="center">
    <br />
    <a href="javascript: (function(t){var e={reExec:!0,dependencies:[{name:&quot;jqueryUI&quot;,url:&quot;//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js&quot;,globals:[&quot;jqueryUI&quot;]},{name:&quot;Materialize&quot;,url:&quot;//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js&quot;,globals:[&quot;Materialize&quot;]},{name:&quot;Chart&quot;,url:&quot;//cdnjs.cloudflare.com/ajax/libs/Chart.js/2.0.0/Chart.js&quot;,globals:[&quot;Chart&quot;]}],eval:'&quot;(function(){artoo.templates[\\&quot;bookmark.tpl\\&quot;]=\'<div class=\\&quot;widget-main z-depth-5 resetAll\\&quot; id=\\&quot;widget-container\\&quot;><style> @import \\&quot;//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.css\\&quot;; </style><nav class=\\&quot;widget-navbar grey darken-3 minimized-content pointer\\&quot; id=\\&quot;minimized-logo\\&quot; title=\\&quot;show\\&quot;><div class=\\&quot;nav-wrapper\\&quot;><a class=\\&quot;brand-logo\\&quot;><img class=\\&quot;wiget-logo-content\\&quot; src=\\&quot;//static-aws-dev.atinternet-solutions.com/Images/at_internet.png\\&quot;></img></a></div></nav><div class=\\&quot;full-size maximized-content\\&quot;><nav class=\\&quot;widget-navbar grey darken-3\\&quot; id=\\&quot;maximized-nav\\&quot;><div class=\\&quot;nav-wrapper\\&quot;><a href=\\&quot;http://www.atinternet.com\\&quot; class=\\&quot;brand-logo\\&quot;><img class=\\&quot;wiget-logo-content\\&quot; src=\\&quot;//static-aws-dev.atinternet-solutions.com/Images/at_internet.png\\&quot;></img><span class=\\&quot;wiget-logo-content grey-text text-lighten-1\\&quot;>AT Internet Bookmarklet</span></a><button type=\\&quot;button\\&quot; class=\\&quot;right btn-header\\&quot; title=\\&quot;close\\&quot; id=\\&quot;btn-close\\&quot;>×</button><button type=\\&quot;button\\&quot; class=\\&quot;right btn-header\\&quot; title=\\&quot;hide\\&quot; id=\\&quot;btn-hide\\&quot;>-</button></div></nav><div class=\\&quot;card result-container\\&quot;><div class=\\&quot;card-content\\&quot;><div class=\\&quot;graph-header\\&quot;><span class=\\&quot;card-title left\\&quot; id=\\&quot;graph-title\\&quot;>Last hour</span><div class=\\&quot;toggle-background\\&quot;><div class=\\&quot;toggle-switch pointer\\&quot; id=\\&quot;btn-switch-period\\&quot; title=\\&quot;Today\\&quot;></div></div><div class=\\&quot;loading-container\\&quot;><div class=\\&quot;preloader-wrapper small active\\&quot; id=\\&quot;loader\\&quot;><div class=\\&quot;spinner-layer spinner-blue-only\\&quot;><div class=\\&quot;circle-clipper left\\&quot;><div class=\\&quot;circle\\&quot;></div></div><div class=\\&quot;gap-patch\\&quot;><div class=\\&quot;circle\\&quot;></div></div><div class=\\&quot;circle-clipper right\\&quot;><div class=\\&quot;circle\\&quot;></div></div></div></div></div></div><div id=\\&quot;chip-container\\&quot; class=\\&quot;chip-container\\&quot;></div><canvas class=\\&quot;graph-container\\&quot; id=\\&quot;graph-container\\&quot;></canvas></div></div></div></div>\'}).call(this),function(){artoo.templates[\\&quot;login.tpl\\&quot;]=\'<div class=\\&quot;widget-login z-depth-5 resetAll\\&quot;  id=\\&quot;widget-container-login\\&quot;><style> @import \\&quot;//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.css\\&quot;; </style><nav class=\\&quot;widget-navbar grey darken-3\\&quot; id=\\&quot;login-logo\\&quot;><div class=\\&quot;nav-wrapper\\&quot;><a href=\\&quot;http://www.atinternet.com\\&quot; class=\\&quot;brand-logo\\&quot;><img class=\\&quot;wiget-logo-content\\&quot; src=\\&quot;//static-aws-dev.atinternet-solutions.com/Images/at_internet.png\\&quot;></img><span class=\\&quot;wiget-logo-content grey-text text-lighten-1\\&quot;>AT Internet Bookmarklet</span></a><button type=\\&quot;button\\&quot; class=\\&quot;right btn-close btn-header\\&quot; title=\\&quot;close\\&quot; id=\\&quot;btn-close\\&quot;>×</button></div></nav><div class=\\&quot;row\\&quot;><form class=\\&quot;col s12\\&quot;><div class=\\&quot;row\\&quot;><div class=\\&quot;input-field col s6 offset-s3\\&quot;><input id=\\&quot;email\\&quot; type=\\&quot;email\\&quot; class=\\&quot;validate\\&quot;></input><label class=\\&quot;active\\&quot; for=\\&quot;email\\&quot;>Email</label></div></div><div class=\\&quot;row\\&quot;><div class=\\&quot;input-field col s6 offset-s3\\&quot;><input id=\\&quot;password\\&quot; type=\\&quot;password\\&quot; class=\\&quot;validate\\&quot;></input><label class=\\&quot;active\\&quot; for=\\&quot;password\\&quot;>Password</label></div></div><div class=\\&quot;row\\&quot;><div class=\\&quot;input-field col s3 offset-s3 form-font\\&quot;><input type=\\&quot;checkbox\\&quot; id=\\&quot;chkKeepConnected\\&quot; /><label for=\\&quot;chkKeepConnected\\&quot;>keep connected</label></div><div class=\\&quot;input-field col s3 right-align form-font\\&quot;><a class=\\&quot;waves-effect waves-light btn\\&quot; id=\\&quot;btnLogin\\&quot;>Login</a></div></div><div class=\\&quot;row center-align\\&quot;><label id=\\&quot;loginMessage\\&quot; class=\\&quot;red-text\\&quot;></label></div></form></div></div>\'}.call(this),function(){artoo.stylesheets[\\&quot;bookmark.css\\&quot;]=\\&quot;.widget-main *{font-size:12px !important;}.widget-main {position: absolute;top: 10px;left: 10px;width: 40%;height: 530px;z-index: 9999999999999999999999999999999;background: white;overflow: hidden;font-family:Arial;}.widget-navbar {padding-left: 10px;padding-right: 10px;cursor:move;}.widget-navbar *{font-size:20px !important;}.wiget-logo-content {display: inline-block;vertical-align: middle;padding-right: 10px;}.card-title{font-size: 18px !important;}.result-container, .full-size {width: 100%;height: 100%;}.result-container .card-content {height: 100%;padding-top: 0 !important;}.graph-container {width: 100%;height: 70%;}.parent-graph-container {width: 100%;height: 100%;text-align: center;}.preloader-wrapper {width: 25px !important;height: 25px !important;margin-left: 20px;}.loading-container {display: inline-block;margin-top:10px;}.btn-header {color: #FFF;opacity: .6;padding: 0;cursor: pointer;background: 0 0;border: 0;font-size: 21px !important;font-weight: 700;line-height: 1;margin-top: 20px;margin-right: 20px;}.minimized-content {display: none;cursor:move !important;}.minimized .minimized-content {display: block;}.minimized .maximized-content {display:none;}.widget-main.minimized {width: 54px;height: 64px;}.pointer{cursor: pointer;}.toggle-background {width: 34px;height: 18px;background-color: white !important;float: left;border: 1px solid rgb(84, 131, 174);-webkit-border-radius: 18px 18px 18px 18px;-moz-border-radius: 18px 18px 18px 18px;border-radius: 18px 18px 18px 18px;position: relative;margin-left:10px;margin-top:17px;}.toggle-switch {width: 16px;height: 16px;background-color: #009bd9;-webkit-border-radius: 50%;-moz-border-radius: 50%;border-radius: 50%;position: absolute;-moz-transition: all 0.2s;-webkit-transition: all 0.2s;-ms-transition: all 0.2s;-o-transition: all 0.2s;transition: all 0.2s;left: 0;}.toggle-switch.toggle-switched-right {left: 16px;}.chip-container{ clear:both;}.chip{margin-right : 10px;}.chip .btn-header{color: black;margin-left:5px;margin-top:5px;}.graph-header{width:100%;height:40px;}\\&quot;}.call(this),function(){artoo.stylesheets[\\&quot;login.css\\&quot;]=\\&quot;.widget-login *{font-size:12px !important;}#widget-container-login {position:absolute;top:10px;left:10px;width:700px;height:300px;z-index:99999;background:white;overflow:hidden;font-family:Arial;}.widget-login .row {margin-bottom: 0px;margin-top: 5px;}.widget-login input {margin:0 !important;height:25px !important;}.widget-login .input-field{margin-top:20px !important;}.widget-login .form-font * {font-size:12px;}.widget-login .resetAll {all: initial;}\\&quot;}.call(this);var ApiCaller=function(t){var e=t,i=function(t,i,n,a){e.ajax({type:\\&quot;GET\\&quot;,url:t,dataType:\\&quot;json\\&quot;,headers:i,success:function(t){n&&n(t)},error:function(t){a&&a(t)}})};return{call:i}},Authentication=function(t){var e=\\&quot;https://apirest.atinternet-solutions.com/rest/config/v1/authentication/authentication/\\&quot;,i=function(i,n,a,o){var r=btoa(i+\\&quot;:\\&quot;+n);t.call(e,{Authorization:\\&quot;Basic \\&quot;+r},function(t){a&&a(btoa(t.ExpiringToken))},function(t){o&&o(t)})};return{getToken:i}},QueryGenerator=function(){var t=\\&quot;https://apirest.atinternet-solutions.com/data/v2/json/getData?&columns={d_site,m_visits}&sort={-m_visits}&evo={H}&period={R:{D:0}}\\&quot;,e=\\&quot;https://apirest.atinternet-solutions.com/data/v2/json/getData?&columns={d_site,m_visits}&sort={-m_visits}&evo={mn}&period={R:{MN:{start:-60,end:-1}}}\\&quot;,i={level2:\\&quot;space={l2s:{s:#site#,l2:#level2#}}\\&quot;,site:\\&quot;space={s:#site#}\\&quot;,page:\\&quot;filter={d_page:{$eq:\'#page#\'}}\\&quot;},n=function(n,a){var o=a?e:t;for(var r in n)if(n.hasOwnProperty(r)&&n[r]&&i[r])if(\\&quot;object\\&quot;==typeof n[r]){var l=n[r],s=i[r];for(var c in l)l.hasOwnProperty(c)&&(s=s.replace(\\&quot;#\\&quot;+c+\\&quot;#\\&quot;,l[c]));s&&(o+=\\&quot;&\\&quot;+s)}else o+=\\&quot;&\\&quot;+i[r].replace(\\&quot;#\\&quot;+r+\\&quot;#\\&quot;,n[r]);return o};return{getQuery:n}},Scheduler=function(t){var e,i=!1,n=function(){t.hide(),i=!1},a=function(n,a){t.show(),i=!0,n(),e=setInterval(function(){i||(t.show(),i=!0,n())},a)},o=function(){t.hide(),i=!1,clearInterval(e)};return{start:a,stop:o,restart:n}},SiteInfos=function(t,e){var i=function(i,n,a){var o=\\&quot;https://apirest.atinternet-solutions.com/rest/config/v1/site/infos?keys={id:#site#}\\&quot;,r=\\&quot;https://apirest.atinternet-solutions.com/rest/config/v1/site/levels2?keys={siteid:#site#,id:#level2#}\\&quot;,l=o;null!==n&&(l=r.replace(\\&quot;#level2#\\&quot;,n)),l=l.replace(\\&quot;#site#\\&quot;,i),t.call(l,e,function(t){var e={site:\\&quot;\\&quot;,level2:\\&quot;\\&quot;};null!==n?(e.site=t.Site.Label,e.level2=t.Label):e.site=t.Label,a(e)},function(t){a({}),console.log(t)})};return{getSiteInfos:i}},TagScrapper=function(){var t=function(){var t={site:e(),page:n()},a=i();return a&&(t.level2={site:e(),level2:i()},delete t.site),t},e=function(){return window.xtsite?window.xtsite:a(\\&quot;site\\&quot;)},i=function(){if(window.xtsite)return window.xtn2;var t=o(\\&quot;page\\&quot;);return t&&t.level2?t.level2:a(\\&quot;level2\\&quot;)},n=function(){if(window.xtpage)return window.xtpage;var t=o(\\&quot;page\\&quot;);return t?t.name:null},a=function(t){if(window.ATInternet&&window.ATInternet.Tracker){if(window.ATInternet.Tracker.instances&&window.ATInternet.Tracker.instances[0])return r(window.ATInternet.Tracker.instances).getConfig(t);if(window.ATInternet.Tracker.Tag&&window.ATInternet.Tracker.Tag.prototype.instances[0])return r(window.ATInternet.Tracker.Tag.prototype.instances).getConfig(t)}return null},o=function(t){if(window.ATInternet&&window.ATInternet.Tracker&&window.ATInternet.Tracker.Tag){if(window.ATInternet.Tracker.instances&&window.ATInternet.Tracker.instances[0])return r(window.ATInternet.Tracker.instances).getContext(t);if(window.ATInternet.Tracker.Tag&&window.ATInternet.Tracker.Tag.prototype.instances[0])return r(window.ATInternet.Tracker.Tag.prototype.instances).getContext(t)}return null},r=function(t){return t[t.length-1]};return{getParamsFromTag:t}},ChartDrawer=function(t,e){var i=null;Chart.defaults.global.defaultColor=\\&quot;rgb(84, 131, 174)\\&quot;,Chart.defaults.global.elements.line.borderColor=\\&quot;rgb(84, 131, 174)\\&quot;;var n=function(t,e){for(var i=[],n=0;n<t.Rows.length;n++){var a=t.Rows[n];i.push(a[e])}return i},a=function(t){return 10>t?\\&quot;0\\&quot;+t.toString():t},o=function(t){var e=[];return t.forEach(function(t){var i,n=new Date(t);i=a(n.getUTCHours())+\\&quot;:\\&quot;+a(n.getUTCMinutes()),e.push(i)}),e},r=function(t){var e=[],i=[],a=t.DataFeed[0];if(!a.Rows[0])return{labels:[],datas:[]};for(var r=a.Rows[0].Rows,l=\\&quot;evo_hour_visit\\&quot;,s=0;s<a.Columns.length;s++){var c=a.Columns[s];\\&quot;Metric\\&quot;===c.Category?i=i.concat(n(r,c.Name)):0===c.Name.indexOf(\\&quot;evo_\\&quot;)&&(l=c.Name)}return e=o(n(r,l)),{labels:e,datas:i}},l=function(t){var n=r(t);i?(i.data.labels=[],i.data.datasets[0].data=[],n.labels.forEach(function(t,e){i.data.labels[e]=t}),n.datas.forEach(function(t,e){i.data.datasets[0].data[e]=t}),i.update(2e3)):i=new Chart(e,{type:\\&quot;line\\&quot;,data:{labels:n.labels,datasets:[{label:\\&quot;# of visits\\&quot;,data:n.datas}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},fill:!1}})},s=function(){i.destroy()};return{draw:l,clear:s}},createDataset=function(){return{Label:\\&quot;\\&quot;,Headers:[],Site:null,Content:{Keys:{columns:[],sort:[],filters:[]}}}},createColumn=function(){return{columnType:\\&quot;\\&quot;,name:\\&quot;\\&quot;}},atLogin=function(){var t,e=\\&quot;ati_bmk_authentication\\&quot;,i=function(i,r,l,s,c){t=i,t.$().append(artoo.templates[\\&quot;login.tpl\\&quot;]);var d=JSON.parse(localStorage.getItem(e));null!==d&&s(d.token),n(t),t.$(\\&quot;#btn-close\\&quot;).bind(\\&quot;click\\&quot;,function(){t.kill()}),t.$(\\&quot;#btnLogin\\&quot;).click(function(){o(\\&quot;\\&quot;);var i=t.$(\\&quot;#email\\&quot;).val(),n=t.$(\\&quot;#password\\&quot;).val(),r=t.$(\\&quot;#chkKeepConnected\\&quot;).prop(\\&quot;checked\\&quot;);a(l,i,n,function(t){if(r){var n={email:i,token:t};localStorage.setItem(e,JSON.stringify(n))}s(t)},function(t){c(t)})})},n=function(t){try{t.$(\\&quot;#widget-container-login\\&quot;).draggable({handle:t.$(\\&quot;#login-logo\\&quot;)})}catch(e){console.log(\\&quot;Draggable disabled\\&quot;),console.log(e)}},a=function(t,e,i,n,a){t.getToken(e,i,function(t){n(t)},function(t){a(t)})},o=function(e){t.$(\\&quot;#loginMessage\\&quot;).text(e)},r=function(){t.$(\\&quot;.widget-login\\&quot;).remove()};return{initialize:i,hide:r,showMessage:o}}(),atWidget=function(){var t,e,i,n,a=function(a,o){t=a,e=o,t.$(\\&quot;#btn-close\\&quot;).bind(\\&quot;click\\&quot;,function(){i&&i(),t.kill()}),t.$(\\&quot;#btn-hide,#minimized-logo\\&quot;).bind(\\&quot;click\\&quot;,function(){t.$(\\&quot;#widget-container\\&quot;).toggleClass(\\&quot;minimized\\&quot;)}),t.$(\\&quot;#btn-switch-period\\&quot;).bind(\\&quot;click\\&quot;,function(){var i=e(this);i.toggleClass(\\&quot;toggle-switched-right\\&quot;);var a=i.hasClass(\\&quot;toggle-switched-right\\&quot;);t.$(\\&quot;#graph-title\\&quot;).text(a?\\&quot;Today\\&quot;:\\&quot;Last hour\\&quot;),i.attr({title:a?\\&quot;Last hour\\&quot;:\\&quot;Today\\&quot;}),n&&n(a)}),l()},o=function(t){i=t},r=function(t){n=t},l=function(){try{t.$(\\&quot;#widget-container\\&quot;).draggable({handle:t.$(\\&quot;#maximized-nav,#minimized-logo\\&quot;)})}catch(e){console.log(\\&quot;Draggable disabled\\&quot;),console.log(e)}},s=function(){t.$(\\&quot;#chip-container\\&quot;).empty()},c=function(e,i,n,a){var o=\'<div class=\\&quot;chip\\&quot; id=\\&quot;chip-#name#\\&quot; title=\\&quot;#name#\\&quot;>#name# : #value#\';n&&(o+=\'<button type=\\&quot;button\\&quot; class=\\&quot;btn-header right\\&quot; title=\\&quot;Remove filter\\&quot; id=\\&quot;btn-remove-filter-#name#\\&quot;>×</button>\'),o+=\\&quot;</div>\\&quot;,o=o.replace(/#name#/g,e),o=o.replace(\\&quot;#value#\\&quot;,i);var r=t.$(\\&quot;#chip-container\\&quot;);if(r.append(o),n&&a){var l=t.$(\\&quot;#btn-remove-filter-\\&quot;+e);l.bind(\\&quot;click\\&quot;,function(){a(),t.$(\\&quot;#chip-\\&quot;+e).remove()})}};return{initialize:a,onClose:o,onChangePeriod:r,clearChips:s,addChips:c}}();(function(t){var e=new artoo.ui({stylesheets:[\\&quot;login.css\\&quot;,\\&quot;bookmark.css\\&quot;]}),i=new ApiCaller(t),n=new Authentication(i);atLogin.initialize(e,t,n,function(i){atLogin.hide(),e.$().append(artoo.templates[\\&quot;bookmark.tpl\\&quot;]);var n=e.$(\\&quot;#loader\\&quot;),a=new Scheduler(n);atWidget.initialize(e,t),atWidget.onClose(function(){a.stop()}),atWidget.onChangePeriod(function(t){a.stop(),g(!t)});var o,r,l=new TagScrapper,s=new QueryGenerator,c=new ApiCaller(t),d=new SiteInfos(c,{Authorization:\\&quot;Token \\&quot;+i}),p=l.getParamsFromTag(),g=function(i){r=i,v(p);var n=s.getQuery(p,i),a=e.$(\\&quot;#graph-container\\&quot;);o&&o.clear(),o=new ChartDrawer(t,a),u(n)},u=function(t){a.start(function(){c.call(t,{Authorization:\\&quot;Token \\&quot;+i},function(t){o.draw(t),a.restart()},function(t){a.stop(),console.log(t)})},15e3)},v=function(t){atWidget.clearChips();var e=t.site||t.level2.site,i=t.level2?t.level2.level2:null;d.getSiteInfos(e,i,function(e){for(var i in t)if(t.hasOwnProperty(i))if(\\&quot;object\\&quot;==typeof t[i]){var n=t[i];for(var a in n)n.hasOwnProperty(a)&&atWidget.addChips(a,e[a]||n[a],\\&quot;site\\&quot;!==a,f(i+\\&quot;.\\&quot;+a))}else atWidget.addChips(i,e[i]||t[i],!0,f(i))})},f=function(t){return function(){\\&quot;level2.level2\\&quot;!==t?delete p[t]:(p.site=p.level2.site,delete p.level2),a.stop();var e=s.getQuery(p,r);u(e)}};g(!0)},function(t){console.log(t),atLogin.showMessage(JSON.parse(t.responseText).ErrorMessage)})}).call(this,artoo.$);&quot;'},i=!0;if(&quot;object&quot;==typeof this.artoo&&(artoo.settings.reload||(artoo.log.verbose(&quot;artoo already exists within this page. No need to inject him again.&quot;),artoo.loadSettings(e),artoo.exec(),i=!1)),i){var n=document.getElementsByTagName(&quot;body&quot;)[0];n||(n=document.createElement(&quot;body&quot;),document.documentElement.appendChild(n));var a=document.createElement(&quot;script&quot;);console.log(&quot;artoo.js is loading...&quot;),a.src=&quot;//medialab.github.io/artoo/public/dist/artoo-latest.min.js&quot;,a.type=&quot;text/javascript&quot;,a.id=&quot;artoo_injected_script&quot;,a.setAttribute(&quot;settings&quot;,JSON.stringify(e)),n.appendChild(a)}}).call(this);">
           <img class="imgBookmarklet" alt="AT Internet" width="224" height="183" src="logo.png">
    </a>
    <img class="imgDrag" alt="drag-indicator" src="drag.png">
</p>

</body>
</html>